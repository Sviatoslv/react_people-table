(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(24)},20:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(10),l=n.n(o),c=n(8),u=n.n(c),i=n(11),s=n(1),d=n(12),h=n(3),m=n(4),p=n(6),f=n(5),S=n(7),b=(n(20),n(21),n(22)),g=function(e){var t=e.people,n=e.handlePersonRowClick,r=e.personRowSelectedId,o=e.personRowSelected,l=function(e,t){return t.filter(function(t){return t.father===e.name||t.mother===e.name}).map(function(e){return e.name}).join(", ")},c=function(e){return b({"born-before-1650":e.born<1650,"died-after-1800":e.died>1800})},u=function(e,t){return b({person:!0,"person--selected":e.id===r&&o,"person--female":"f"===e.sex,"person--mother":""!==e.children&&"f"===e.sex,"person--male":"m"===e.sex,"person--father":l(e,t)&&"m"===e.sex})},i=t.map(function(e,t,r){return a.a.createElement("tr",{key:e.id+e.name,className:u(e,r),onClick:function(){return n(e.id)}},a.a.createElement("td",null,e.id),a.a.createElement("td",{className:c(e)},e.name),a.a.createElement("td",null,e.sex),a.a.createElement("td",null,e.born),a.a.createElement("td",null,e.died),a.a.createElement("td",null,e.father),a.a.createElement("td",null,e.mother),a.a.createElement("td",{className:e.age>65?"longLife":"ohSoShortLife"},e.age),a.a.createElement("td",{className:"person--lived-in-".concat(e.century)},e.century),a.a.createElement("td",null,e.children))});return a.a.createElement("tbody",null,i)},E=function(e){return a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{onClick:function(){return e.handleSort("id")}},"id"),a.a.createElement("th",{onClick:function(){return e.handleSort("name")}},"name"),a.a.createElement("th",null,"sex"),a.a.createElement("th",{onClick:function(){return e.handleSort("born")}},"born"),a.a.createElement("th",{onClick:function(){return e.handleSort("died")}},"died"),a.a.createElement("th",null,"father"),a.a.createElement("th",null,"mother"),a.a.createElement("th",{onClick:function(){return e.handleSort("age")}},"age"),a.a.createElement("th",null,"century"),a.a.createElement("th",null,"children")))},w=(n(23),function(e){return a.a.createElement("table",{className:"PeopleTable"},a.a.createElement(E,{handleSort:e.handleSort}),a.a.createElement(g,{people:e.people,handlePersonRowClick:e.handlePersonRowClick,personRowSelectedId:e.personRowSelectedId,personRowSelected:e.personRowSelected}))}),v=n(2),y=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",sex:!1,born:"",died:"",mother:"",father:""},n.handleNewPerson=function(e){var t=e.target.name,r=e.target.value;"name"===t&&(r=r.replace(/[^A-Za-z ]/,"")),"born"===t&&"died"===t&&(r=r.replace(/[^0-9]/,"")),n.setState(Object(v.a)({},t,r))},n.getParrents=function(e,t,n){return t.filter(function(t){return t.sex===e&&t.born<n}).map(function(e){return a.a.createElement("option",{key:e.id+e.name,value:e.name},e.name)})},n}return Object(S.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.people,t=this.state.born,n=this.getParrents("m",e,t),r=this.getParrents("f",e,t);return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.props.handleNewPersonSubmit},a.a.createElement("input",{type:"text",name:"name",placeholder:"name",value:this.state.name,onChange:this.handleNewPerson,required:!0}),a.a.createElement("label",{htmlFor:"femaleRadio"},a.a.createElement("input",{name:"sex",type:"radio",value:"f",required:!0,onChange:this.handleNewPerson,id:"femaleRadio"}),"Female"),a.a.createElement("label",{htmlFor:"maleRadio"},a.a.createElement("input",{name:"sex",type:"radio",value:"m",required:!0,onChange:this.handleNewPerson,id:"maleRadio"}),"Male"),a.a.createElement("input",{name:"born",type:"number",pattern:"[0-9]{4}",placeholder:"born year",required:!0,onChange:this.handleNewPerson}),a.a.createElement("input",{name:"died",type:"number",pattern:"[0-9]{4}",placeholder:"died",required:!0,onChange:this.handleNewPerson}),a.a.createElement("input",{name:"father",type:"text",placeholder:"father",required:!0,value:this.state.father,onChange:this.handleNewPerson}),a.a.createElement("select",{name:"father",value:this.state.father,onChange:this.handleNewPerson},n),a.a.createElement("input",{name:"mother",type:"text",placeholder:"mother",value:this.state.mother,required:!0,onChange:this.handleNewPerson}),a.a.createElement("select",{name:"mother",value:this.state.mother,onChange:this.handleNewPerson},r),a.a.createElement("button",{type:"submit"},"Add New Person")),a.a.createElement("p",null,"Name:",this.state.name," "),a.a.createElement("p",null,"Sex:",this.state.sex),a.a.createElement("p",null,"Born:",this.state.born),a.a.createElement("p",null,"Died:",this.state.died),a.a.createElement("p",null,"Father:",this.state.father),a.a.createElement("p",null,"Mother:",this.state.mother))}}]),t}(a.a.Component),C=function(){return fetch("https://mate-academy.github.io/react_people-table/api/people.json").then(function(e){return e.json()})},P=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={peopleFromServer:[],people:[],filterInputValue:"",toggleNameSortOrder:1,personRowSelected:!1,personRowSelectedId:0,errorMessage:""},n.addKeysToPersonInArr=function(e){return e.map(function(e,t,r){return Object(d.a)({},e,{id:t+1,age:e.died-e.born,century:n.getCentury(e.died),children:n.getChildrenString(e,r)})})},n.getCentury=function(e){return Math.ceil(e/100)},n.getChildrenString=function(e,t){return t.filter(function(t){return t.father===e.name||t.mother===e.name}).map(function(e){return e.name}).join(", ")},n.handleFilterInput=function(e){var t=e.target.value;n.setState({filterInputValue:t})},n.isStrIncludeSubstr=function(e,t){return!!e&&e.toLowerCase().includes(t.toLowerCase())},n.handleSubmit=function(e){e.preventDefault(),n.setState(function(e){return{people:e.peopleFromServer.filter(function(t){return n.isStrIncludeSubstr(t.name,e.filterInputValue)||n.isStrIncludeSubstr(t.mother,e.filterInputValue)||n.isStrIncludeSubstr(t.father,e.filterInputValue)})}})},n.returnSortingFunction=function(e,t,n){switch(typeof e[0][t]){case"string":return console.log([t],"bugaga"),function(e,r){return n*e[t].localeCompare(r[t])};case"number":return console.log(e[0][t],"muahaha"),function(e,r){return n*(e[t]-r[t])};default:return 0}},n.handleSort=function(e){n.setState(function(t){return{people:Object(s.a)(t.peopleFromServer).sort(n.returnSortingFunction(Object(s.a)(t.peopleFromServer),e,t.toggleNameSortOrder)),toggleNameSortOrder:-t.toggleNameSortOrder}})},n.handlePersonRowClick=function(e){n.setState({personRowSelectedId:e}),n.state.personRowSelectedId===e?n.setState(function(e){return{personRowSelected:!e.personRowSelected}}):n.state.personRowSelectedId!==e&&n.setState({personRowSelected:!0})},n.handleNewPersonSubmit=function(e){e.preventDefault();var t={name:e.target[0].value,sex:e.target[1].checked?"f":"m",born:e.target[3].value,died:e.target[4].value,mother:e.target[5].value,father:e.target[6].value},r=t.died-t.born;r<=0||r>150?n.setState({errorMessage:"Incorrect Age, or to much or not enough"}):n.setState(function(e){return{errorMessage:"",peopleFromServer:n.addKeysToPersonInArr([].concat(Object(s.a)(e.peopleFromServer),[t])),people:n.addKeysToPersonInArr([].concat(Object(s.a)(e.people),[t]))}})},n}return Object(S.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,n=this.addKeysToPersonInArr(t),this.setState({peopleFromServer:n,people:n});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"People table",this.state.people.length),a.a.createElement("h2",null,this.state.errorMessage),a.a.createElement(y,{handleNewPersonSubmit:this.handleNewPersonSubmit,people:this.state.people}),a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("input",{type:"text",placeholder:"Filter by Name, Mother of Father",value:this.state.filterInputValue,onChange:this.handleFilterInput}),a.a.createElement("button",{type:"submit",className:"button"},"Filter")),a.a.createElement(w,{people:this.state.people,handleSort:this.handleSort,handlePersonRowClick:this.handlePersonRowClick,personRowSelectedId:this.state.personRowSelectedId,personRowSelected:this.state.personRowSelected}))}}]),t}(a.a.Component);l.a.render(a.a.createElement(P,{test:123}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.67d7ce48.chunk.js.map